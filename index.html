<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Power Plant Dashboard</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chart.js & Plugins -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>
    <!-- PapaParse -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="dashboard">
        <header class="header">
            <div class="header-left">
                <h1>âš¡ Power Plant Monitoring</h1>
                <p id="dateRange">Loading data...</p>
            </div>
            <div class="header-right">
                <label for="uploadCsv" class="btn" style="cursor: pointer; margin-right: 10px;">ðŸ“‚ Open CSV</label>
                <input type="file" id="uploadCsv" accept=".csv" style="display: none;">

                <input type="date" id="dateFilter" class="btn btn-sm" style="margin-right: 10px; cursor: pointer;">

                <div class="zoom-controls" style="display: inline-flex; gap: 5px;">
                    <button class="btn btn-sm" onclick="zoomTime(24)">1 Day</button>
                    <button class="btn btn-sm" onclick="zoomTime(24*7)">1 Week</button>
                    <button class="btn btn-sm" onclick="zoomTime(24*30)">1 Month</button>
                    <button id="resetZoomBtn" class="btn btn-sm">All</button>
                </div>
            </div>
        </header>

        <main class="grid-container">
            <!-- KPIS (Optional, calculated from data) -->
            <div class="kpi-row">
                <div class="kpi-card">
                    <h3>Avg Export Power</h3>
                    <div class="value" id="kpiPower">-</div>
                    <div class="unit">MW</div>
                </div>
                <div class="kpi-card">
                    <h3>Avg Steam Flow</h3>
                    <div class="value" id="kpiSteam">-</div>
                    <div class="unit">t/h</div>
                </div>
                <div class="kpi-card">
                    <h3>Max Clean Temp</h3>
                    <div class="value" id="kpiTemp">-</div>
                    <div class="unit">Â°C</div>
                </div>
            </div>

            <!-- Main Chart -->
            <div class="chart-card main-chart-card">
                <div class="card-header">
                    <h2>Operation Trends</h2>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <button class="btn btn-sm" onclick="downloadChart()" title="Capture as Image">ðŸ“¸
                            Capture</button>
                        <div class="legend-toggles" id="legendToggles">
                            <!-- Checkboxes generated by JS -->
                        </div>
                    </div>
                </div>
                <div class="chart-wrapper">
                    <canvas id="mainChart"></canvas>
                </div>
            </div>


        </main>
    </div>
    <script src="app.js"></script>
</body>

</html>